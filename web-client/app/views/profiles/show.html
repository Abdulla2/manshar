<div class="manshar-profile">
  <div class="avatar" manshar-cover url="{{profile.cover_url}}">
    <div class="avatar blured" manshar-cover url="{{profile.cover_url}}"></div>
  </div>
  <div class="title">
    <img ng-src="{{profile.cover_url}}"/>
    <h1>{{profile.name}}</h1>
    <h4>{{profile.bio}}</h4>
    <button class="action-button" ng-click="editProfile()" ng-show="user.id == profile.id">
      <i class="fa fa-pencil"></i>
      تعديل معلومات صفحتك
    </button>
  </div>
  <div class="listing-types-tabs profile-tabs">
    <a ng-click="loadArticles()" ng-class="{'active': activeTab == 'published'}">المنشورات</a>
    <a ng-click="loadRecommendations()" ng-class="{'active': activeTab == 'recommendations'}">التوصيات</a>
    <a ng-click="loadDiscussions()" ng-class="{'active': activeTab == 'discussions'}">المناقشات</a>
  </div>
</div>

<ul class="cards-list-container one-column card-list profile-list" id="articles-list">
  <a href="/articles/new" class="write-new-button">
    <i class="fa fa-pencil"></i>
    اكتب مقال جديد
  </a>
  <li class="card" ng-repeat="article in articles">
    <div class="article-details article-card">
      <div class="header tray">
        <div class="title">
          <a ng-href="/articles/{{article.id}}"
              analytics-on="click"
              analytics-event="click"
              analytics-category="UI"
              analytics-label="Article in Profile - {{article.title}}"
              analytics-value="article-{{article.id}}">
            <h1>{{article.title}}</h1>
            <h2>{{article.tagline}}</h2>
          </a>
          <h3>
            <div class="date">
              <span>
                بتاريخ:
              </span>
              {{article.published_at | date:'dd-MM-yyyy'}}
            </div>
          </h3>
        </div>
      </div>

      <div class="profile-article-action" ng-show="isOwner(user, article) && activeTab == 'published'">
        <button class="action-button" ng-click="deleteArticle(article)" ng-disabled="inProgress" ng-class="{'in-progress': inProgress == 'delete'}">
          <i class="fa fa-trash-o"></i>
        </button>
        <button class="action-button" ng-click="editArticle(article.id)">
          <i class="fa fa-pencil"></i>
        </button>
      </div>

    </div>
  </li>
</ul>


<ul class="cards-list-container one-column card-list" ng-show="drafts[0] && user.id == profile.id && activeTab == 'published'">
  <h1 class="header-label">
    <span>المسودات</span>
  </h1>
  <li ng-repeat="article in drafts" class="card draft">
    <div class="article-details article-card">
      <div class="header tray">
        <div class="title">
          <a ng-href="/articles/{{article.id}}">
            <h1>{{article.title || "بدون عنوان"}}</h1>
            <h2>{{article.tagline}}</h2>
          </a>
          <h3>
            <div class="date">
              <span>
                بتاريخ:
              </span>
              {{article.created_at | date:'dd-MM-yyyy'}}
            </div>
          </h3>
        </div>
      </div>
      <div class="profile-article-action" ng-show="isOwner(user, article)">
        <button class="action-button" ng-click="deleteArticle(article)" ng-if="article.id" ng-disabled="inProgress" ng-class="{'in-progress': inProgress == 'delete'}">
          <i class="fa fa-trash-o"></i>
        </button>
        <button class="action-button" ng-click="editArticle(article.id)">
          <i class="fa fa-pencil"></i>
        </button>
      </div>
    </div>
  </li>
</ul>
